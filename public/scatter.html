<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Gumi PCë°© ì´ìš©ë£Œ Pie</title>
  <link rel="stylesheet" href="./vendor/apexcharts/dist/apexcharts.css" />
  <script src="./vendor/apexcharts/dist/apexcharts.js"></script>
</head>
<body>
  <h2 style="text-align:center;">ğŸ¥§ êµ¬ë¯¸ PCë°© ì´ìš©ë£Œ Pie ì°¨íŠ¸</h2>
  <div id="chart"></div>

  <script>
    fetch(`http://localhost:3000/api/gumi`) 
      .then(res => res.json())
      .then(json => {
        const data = json;

        // Pie Chart ë°ì´í„° ë³€í™˜
        const seriesData = data.map(item => item.pc);     // ê°€ê²© ë°°ì—´
        const labelsData = data.map(item => item.se);     // í–‰ì •êµ¬ì—­ ë°°ì—´

        const options = {
          chart: {
            type: "pie",
            height: 400
          },
          series: seriesData,
          labels: labelsData,
          tooltip: {
            y: {
              formatter: function(value, { seriesIndex }) {
                const item = data[seriesIndex];
                return `${item.prdlst_nm} : ${value.toLocaleString()}ì›<br/>ê¸°ì¤€ì¼: ${item.date_stdde}`;
              }
            }
          },
          colors: ["#3B82F6", "#10B981", "#F59E0B", "#EF4444", "#6366F1", "#EC4899", "#14B8A6"]
        };

        const chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
      })
      .catch(err => {
        console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", err);
      });
  </script>
</body>
</html>

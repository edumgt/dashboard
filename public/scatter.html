<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Gumi PCë°© ì´ìš©ë£Œ Scatter</title>
  <link rel="stylesheet" href="./vendor/apexcharts/dist/apexcharts.css" />
  <script src="./vendor/apexcharts/dist/apexcharts.js"></script>
</head>
<body>
  <h2 style="text-align:center;">ğŸ“Š êµ¬ë¯¸ PCë°© ì´ìš©ë£Œ Scatter ì°¨íŠ¸</h2>
  <div id="chart"></div>

  <script>
    // ì‹¤ì œ JSON êµ¬ì¡° ëŒ€ì‘
    fetch(`https://apis.data.go.kr/5080000/pricesInfoService/getPricesInfo?serviceKey=85ce971033ed5ac42638fd66e56c14bd381d6ed61f40953b97bc60730aca620b&pageNo=1&numOfRows=100`) // ë˜ëŠ” API ì—”ë“œí¬ì¸íŠ¸
      .then(res => res.json())
      .then(json => {
        const data = json.body; // body ë°°ì—´ ì¶”ì¶œ

        // Scatter ë°ì´í„° ë³€í™˜
        const seriesData = data.map(item => ({
          x: item.se,   // í–‰ì •êµ¬ì—­ëª…
          y: item.pc    // ê°€ê²©
        }));

        const options = {
          chart: {
            type: "scatter",
            height: 350,
            zoom: { enabled: true, type: "xy" }
          },
          series: [{
            name: "PCë°© ì´ìš©ë£Œ",
            data: seriesData
          }],
          xaxis: {
            type: "category",
            title: { text: "í–‰ì •êµ¬ì—­" }
          },
          yaxis: {
            title: { text: "ì´ìš©ë£Œ (ì›)" },
            min: 0
          },
          tooltip: {
            custom: function({ dataPointIndex }) {
              const item = data[dataPointIndex];
              return `
                <div style="padding:8px">
                  <b>${item.se}</b><br/>
                  ${item.prdlst_nm} : ${item.pc.toLocaleString()}ì›<br/>
                  ê¸°ì¤€ì¼: ${item.date_stdde}
                </div>
              `;
            }
          },
          colors: ["#3B82F6"]
        };

        const chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
      })
      .catch(err => {
        console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", err);
      });
  </script>
</body>
</html>
